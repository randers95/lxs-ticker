<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>LXS LIVE â€” The Liberty Exchange</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  body {
    background-color: #000;
    color: #00ff88;
    font-family: 'Courier New', monospace;
    margin: 0;
    overflow: hidden;
  }
  .overlay {
    position: absolute;
    top: 15px;
    left: 25px;
    font-size: 22px;
    color: #00ffff;
    text-shadow: 0 0 8px #00ffff;
  }
  .ticker {
    position: absolute;
    bottom: 25px;
    white-space: nowrap;
    font-size: 34px;
    color: #00ff88;
    text-shadow: 0 0 6px #00ff88;
  }
  @keyframes scroll {
    0% { transform: translateX(100%); }
    100% { transform: translateX(-100%); }
  }
  .scrolling {
    animation: scroll 240s linear infinite;
  }
  .symbol { margin-right: 65px; }
  .up { color: #00ff00; }
  .down { color: #ff4040; }
</style>
</head>
<body>
  <div class="overlay">ðŸ“ˆ LXS LIVE â€” The Liberty Exchange</div>
  <div class="ticker scrolling" id="ticker">
    <span>Loading ticker data...</span>
  </div>

<script>
const ticker = document.getElementById('ticker');
const FEED_URL = "https://script.google.com/macros/s/AKfycbySgsOv083Th7Rg9ECTDEybsciew2uBBq7fvzJF6vlY_DNjxdcVcLJAcq3Ji-v8oJjk/exec";

// Fetch ticker data and update display
async function loadTickers() {
  try {
    const res = await fetch(FEED_URL);
    if (!res.ok) throw new Error("Feed not reachable");
    const data = await res.json();

    if (!Array.isArray(data) || data.length === 0) {
      ticker.innerHTML = "<span style='color: red;'>No data available.</span>";
      return;
    }

    const html = data.map(t => {
      const dir = t.direction === "up" ? "â–²" : "â–¼";
      return `<span class="symbol">${t.symbol} ${dir} ${t.price} 
        <span class="${t.direction}">${t.change}</span></span>`;
    }).join('');

    // Duplicate once for smooth infinite scroll
    ticker.innerHTML = html + html;
  } catch (err) {
    console.error(err);
    ticker.innerHTML = "<span style='color:red;'>Error loading ticker feed.</span>";
  }
}

// Run immediately, then refresh every 30 seconds
loadTickers();
setInterval(loadTickers, 30000);
</script>
</body>
</html>
